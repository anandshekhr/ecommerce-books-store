{% extends "base.html" %}
{% block title %}{{product.title | slice:10}}{% endblock title %}
{% block head %}
<!-- Meta Description -->
<meta name="description" content="{{ product.description|truncatechars:150 }}">

<!-- Open Graph Meta Tags for Social Sharing -->
<meta property="og:title" content="{{ product.title }}">
<meta property="og:description" content="{{ product.description|truncatechars:150 }}">
<meta property="og:image" content="{{ product.thumbnail.url }}">
<meta property="og:url" content="{{ request.build_absolute_uri }}">
<meta property="og:type" content="product">

<!-- Twitter Card Meta Tags -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ product.title }}">
<meta name="twitter:description" content="{{ product.description|truncatechars:150 }}">
<meta name="twitter:image" content="{{ product.thumbnail.url }}">

<!-- Other Meta Tags (SEO, etc.) -->
<meta name="keywords" content="{{ product.title }}, VAMS Books Store, eBooks, PDF">
<meta name="author" content="VAMS Books Store">

<!-- Canonical URL -->
<link rel="canonical" href="{{ request.build_absolute_uri }}">

{% endblock head %}
{% block style %}
@media (max-width: 768px) {
    .item {
        margin-left:5%;
        width: 95%;
    }
}
.item {
    margin-top: 5%;
}

{% endblock style %}
{% block content %}
    <div class="row">
        <!-- Product Images Carousel -->
        <div class="col-md-6">
            <div id="productImagesCarousel" class="carousel slide">
                <div class="carousel-inner">
                    {% for image in product.images.all %}
                        <div class="carousel-item {% if forloop.first %}active{% endif %}">
                            <img src="{{ image.image.url }}" class="d-block w-100" alt="Product Image" style="width: 100%; height: 700px; object-fit: contain; margin-top:10px;">
                        </div>
                    {% endfor %}
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#productImagesCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#productImagesCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
        

        <!-- Product Details -->
        <div class="col-md-6 item">
            <h1>{{ product.title }}</h1>
            <p>{{ product.description }}</p>
            <p>
                {% if product.og_price %}
                    <span class="text-muted" style="text-decoration: line-through;">₹{{ product.og_price }}</span>
                {% endif %}
                <span class="text-primary">₹{{ product.price }}</span>
            </p>

            <!-- Add to Cart & Buy Now Buttons -->
            <div class="d-flex">
                <a href="{% url 'add_to_cart' product.id %}" class="btn btn-success me-3">Add to Cart</a>
                {% comment %} <a href="{% url 'add_to_cart' product.id %}" class="btn btn-primary">Buy Now</a> {% endcomment %}
            </div>
        </div>
    </div>
{% endblock content %}